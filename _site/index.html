<!DOCTYPE html>
<html>

<head>

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width initial-scale=1">

<meta property="og:title" content="MoreFreeze">
<title>MoreFreeze</title>
<meta property="og:description" content="morefreeze's blog">
<meta property="og:url" content="/">
<meta property="og:site_name" content="MoreFreeze">
<meta property="og:locale" content="en_US">
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@morefreeze">
<meta name="twitter:creator" content="@morefreeze">
<meta name="twitter:title" content="MoreFreeze">
<meta name="twitter:description" content="morefreeze's blog">
<meta name="twitter:url" content="/">

<meta name="keywords" content="Jekyll, theme, Freshman21">

<link rel="icon" href="/images/favicon.ico">
<link rel="stylesheet" href="/css/main.css">
<link rel="canonical" href="/">
<link rel="alternate" type="application/atom+xml" title="MoreFreeze" href="/feed.xml" />

<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


</head>




<body>

<div class="container">

  <header class="site-header">

  <div class="wrapper">

    <h1 class="site-title"><a href="/">MoreFreeze</a></h1>
    <h3 class="site-meta">MoreFreeze's blog</h3>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>
      <div class="trigger">
        
        
        <a class="page-link" href="/">Home</a>
        
        
        
        <a class="page-link" href="/b_about.html">About Me</a>
        
        
        
        <a class="page-link" href="/archives/">Archives</a>
        
        
        
        <a class="page-link" href="/categories/">Categories</a>
        
        
        
        <a class="page-link" href="/tags/">Tags</a>
        
        
        
        <a class="page-link" href="/games/">Games</a>
        
        
        
        
        
        
        
        <a class="page-link" href="/wiki/">Wiki</a>
        
        
        
        
        
        
      </div>
    </nav>

  </div>

</header>


    

  <div class="page-content col-sm-8">
    <div class="home">
  <div class="post" itemscope itemtype="http://schema.org/BlogPosting" >
    
    
  
    <header class="post-header">
      <h1 itemprop="name" class="post-title">
        <a itemprop="url" class="post-link" href="/book/2016/07/16/the-song-of-distant-earth.html">The Song Of Distant Earth</a>
      </h1>
      <meta itemprop="keywords" content="Note,Arthur C. Clarke,Sci-fi" />
      <p class="post-meta">
      Posted in
      
      <a href="/categories/#book">book</a>&nbsp;
      
      
      and tagged
      
      <a href="/tags/#Note" title="Note">Note </a>, 
      
      <a href="/tags/#Arthur C. Clarke" title="Arthur C. Clarke">Arthur C. Clarke </a>, 
      
      <a href="/tags/#Sci-fi" title="Sci-fi">Sci-fi </a>
      
      
      <time itemprop="datePublished" datetime="2016-07-16">
      on Jul 16, 2016
      </time>
      </p>
    </header>

    <article class="post-content" itemprop="articleBody">
        
<p>第一次知道《遥远地球之歌》还是因为宝树的《古老地球之歌》，于是看了一发，
总体感觉小说在当时的年代一定很赞，但放现在，唉，科幻小说并不像经典名著一样不惧时间的流逝啊。</p>

<p>故事讲的是</p>


        
        

        
        <p><a href="/book/2016/07/16/the-song-of-distant-earth.html/#read-more">Read more</a></p>
        
    </article> <hr />
    
    
  
    <header class="post-header">
      <h1 itemprop="name" class="post-title">
        <a itemprop="url" class="post-link" href="/book/2016/06/24/the-end-of-eternity.html">The End of Eternity</a>
      </h1>
      <meta itemprop="keywords" content="Note,Isaac Asimov,Sci-fi" />
      <p class="post-meta">
      Posted in
      
      <a href="/categories/#book">book</a>&nbsp;
      
      
      and tagged
      
      <a href="/tags/#Note" title="Note">Note </a>, 
      
      <a href="/tags/#Isaac Asimov" title="Isaac Asimov">Isaac Asimov </a>, 
      
      <a href="/tags/#Sci-fi" title="Sci-fi">Sci-fi </a>
      
      
      <time itemprop="datePublished" datetime="2016-06-24">
      on Jun 24, 2016
      </time>
      </p>
    </header>

    <article class="post-content" itemprop="articleBody">
        
<p>上周读完了阿西莫夫的《永恒的终结》，感觉文章的思路非常神奇，说下对这书的感受。</p>

<p>先解释下背景，永恒时空是在27世纪成立的，它独立于时间线之外，
相当于一个时间线的警察局，对于正统时间线的问题（比如发生核爆啦）进行修正，
从而向着永恒时空“想要”的方向发展。
永恒时空会从各个世纪挑选人才，培训他们进入永恒时空工作。
永恒时空工种大体从低到高分为以下几种:</p>

<ol>
  <li>新手： 刚进行完培训的人，做些杂务;</li>
  <li>修理工： 负责对时空机器的检修;</li>
  <li>观察者： 负责穿越时空对当时世界进行观察，带回必要的数据以供计算;</li>
  <li>时空技师： 真正穿越回某个时间点进行这些改动的人;</li>
  <li>计算师： 负责对带回的数据进行计算，得出一个最小修改却能影响整个世界走势结果
（这部分其实就是倒腾下计算器）。</li>
</ol>

<p>一个名叫哈伦的时空技师，哈伦因为在一次任务中表现良好，
被时空议会的元老破格提拔为时空技师，
并让哈伦教授一个新手关于古地球（实际是20世纪）时的知识，
之后哈伦遇到了一个妹子，两人一见倾心，
但永恒时空规定时空人必须要向组织提交申请才能与其他世纪的普通人进行性交，
于是哈伦就把这妹子藏在了10万多世纪之后的地方，因为这里已经没有人类了，
只是永恒时空将一些物资通过时空复制的办法放在这里，
但万万没想到他和妹子的相遇是一个计算师的阴谋，而后者是为了挤掉时空议会的元老。</p>

<p>但你以为这就是真相么，这个计算师的小阴谋根本不值一提，
哈伦发现他已经不能上行到10万世纪去找自己的妹子了，于是就去找时空元老质问，
时空元老告诉哈伦，后者教授的那个新手是穿越回24世纪发明时空力场人（叫马兰松），
而正因为时空力场的发明，才得以在27世纪建立永恒时空。
哈伦于是一不坐二不休，阻挠了这个因果链的形成，让那个新手穿越到了错误的年代。
经过时空元老一番苦口婆心的教导，哈伦同意去修正这个错误，因为他也想再见到妹子，
最终他们找到了送错的新手，哈伦也见到了妹子，但他自己也意识到了这个更大的阴谋，
原来这个妹子是从隐藏时空来的，隐藏时空的人类早已发现了时空旅行的秘密，
但他们不认可永恒时空的做法，他们认为有无穷多个平等的时空，
不能因为永恒时空的改动而去影响他们，其实隐藏世纪的人早已发现外面更大的宇宙，
但因为永恒时空的干涉，现在时间线的人类还蒙在鼓里，于是他们决定去摧毁永恒时空。
当然最终哈伦和妹子幸福地生活在一起，永恒时空就让它见鬼去吧。</p>

<p>读完后很赞同隐藏世纪人做法，是为了让人类顺其发展，
虽然永恒时空的“优化”会有一些方面的好处，但也有另一些缺点，
人类无法看到外面更大的宇宙。
很新颖的地方是时空元老对于时空链的逻辑推导真的屌，因为现在永恒时空还存在，
所以哈伦要去找那个新手，所以哈伦还会找到他，所以新手一定留下了什么线索。
这套互为因果的理论也是惊到我了。</p>

        
        

        
    </article> <hr />
    
    
  
    <header class="post-header">
      <h1 itemprop="name" class="post-title">
        <a itemprop="url" class="post-link" href="/note/2016/06/12/learning-how-to-learn.html">"Learning how to learn" Notes</a>
      </h1>
      <meta itemprop="keywords" content="note,learning" />
      <p class="post-meta">
      Posted in
      
      <a href="/categories/#note">note</a>&nbsp;
      
      
      and tagged
      
      <a href="/tags/#note" title="note">note </a>, 
      
      <a href="/tags/#learning" title="learning">learning </a>
      
      
      <time itemprop="datePublished" datetime="2016-06-12">
      on Jun 12, 2016
      </time>
      </p>
    </header>

    <article class="post-content" itemprop="articleBody">
        
<p>Last month I have study a course on Coursera, it is called
“<a href="https://www.coursera.org/learn/learning-how-to-learn">Learning how to learn</a>”.
It is a course that teach you how to learn efficiently. I made some notes about it
and share here.
(I just list each view point which I think is important, but I think I can figure out
better way to show next time)</p>

<h2 id="week-1-two-mode-of-your-brain">Week 1 Two mode of your brain</h2>
<ol>
  <li>Your brain has two mode: focus mode, diffuse mode.</li>
  <li>Focus mode has tight spacing for the rubber bumpers.</li>
  <li>Diffuse mode has more widely spaced bumpers.</li>
  <li>If you need figure out a multiply problem you use your focus mode.</li>
  <li>If you go for a walk, take a shower or drift off to sleep you go into diffuse mode.</li>
  <li>Your memory is very important to learning.</li>
  <li>There are four slots in your working memory. Working memory is like a not very good blackboard.</li>
  <li>Long term memory is like a storage warehouse.</li>
  <li>If you repeat and practice enough to change working memory to long term memory.</li>
  <li>Don’t repeat many times in one day.</li>
  <li>Sleeping is very important for learning. When you sleep, it will wash away the toxins in your brain.</li>
  <li>Exercise is surprisingly valuable in helping improve both our memory and our ability of learn.</li>
</ol>

<h2 id="week-2-facts-of-brain">Week 2 Facts of brain</h2>
<ol>
  <li><strong><em>Chunk</em></strong> can be form through: focus, understanding basic idea or concept. It will
occupy one of <strong>four</strong> memory slots.</li>
  <li><strong>Practice</strong> to help you gain mastery and a sense of the big-picture context.</li>
  <li>After reading, <strong><em>recall</em></strong> what was read can help remember material easily. I mean
recall without any pages of book or hints.</li>
  <li>Change your physical environment to recall is helpful too.</li>
  <li>If you just open book or Google and answer is front of you, notice this is a
<strong><em>illusion of competence</em></strong> in learning. You see the answer, that doesn’t stand for
you have learned.</li>
  <li>Testing yourself is a good way to check what you learn.</li>
  <li>Don’t fill color whole page. That is, you should use your highlighting pen carefully.</li>
  <li>Make mistake is welcome, only if it won’t occur in your exam.</li>
  <li>Three neuromodulators (神经递质) are: <em>acetylcholine</em> (乙酰胆碱), <em>dopamine</em> (多巴胺),
<em>serotonin</em> (血清素).</li>
  <li>Acetylcholine helps you build your long term memory when you focus.</li>
  <li>Dopamine can affect your decision. It will fool your brain something wonderful
has just happen. But you can give yourself some award to motivate to finish something.
Loss of dopamine will result in slowness, rigidity, this is called Parkinson’s disease.</li>
  <li>Serotonin will strongly affects your social life. Low serotonin will lead more
risk actions.</li>
  <li>Visit <a href="http://www.brainfacts.org/">brainfacts.org</a> to fetch more facts of brain.</li>
  <li>Building chunk can help you transfer some specific concept to other concept.</li>
  <li>Even if you need learn much concept of a chapter, you still need do your best.
Because you remember first concept once, you will remember next concept easily,
as same as the third and so on.</li>
  <li>You should do some exercise but don’t do it if it has been easy. This is <strong><em>overlearning</em></strong>.</li>
  <li>You can move your focus to more difficult material. This is called <strong><em>Deliberate
Practice</em></strong> (刻意练习). Do you think of 10000 hours theory?</li>
  <li>If your spinball (This is a analogy of your mind) always go from same initial
place, you can’t let your ball arrive more bottom where your solution is.
This is <strong><em>Einstellung</em></strong> (思维定势, from German word “Mindset”).</li>
  <li>Learning new subject means learning not only the basic chunk, but also select
and use different chunks. You may jump different chapters even different subject,
that will lead you to new idea. This is <strong><em>interlearning</em></strong>.</li>
  <li>Law of Serendipity: <strong><em>Lady Luck favors the one who tries</em></strong>.</li>
</ol>

<h2 id="week-3-memory">Week 3 Memory</h2>
<ol>
  <li>Chunking is related to habit. Habit can <strong>save our energy</strong>. Because when you
going to zombie mode (habit), your brain won’t focus on these instead of other
key information.</li>
  <li>Make a habit need 4 steps:
    <ol>
      <li>The cue. This is trigger that launches you into zombie mode.</li>
      <li>The routine. This is what you do when you receive a cue. It is useful or harmful.</li>
      <li>The reward. You can give yourself a little pleasure after you have done
 the routine. Finding ways to reward good study habits is important for escaping
 procrastination (拖延症).</li>
      <li>The brief. You should change your bad underlying brief.</li>
    </ol>
  </li>
  <li>Quit wasting time and if you start you will feel better.</li>
  <li>Don’t focus on product instead of <strong><em>process</em></strong>.</li>
  <li>Put your focus on 25 minutes <strong><em>Pomodoro</em></strong>, not on completing a task.</li>
  <li>There are four categories of cue, these will trigger your routine:
    <ol>
      <li>Location</li>
      <li>Time</li>
      <li>How you feel (like smell)</li>
      <li>Reaction</li>
    </ol>
  </li>
  <li>Choose a quiet spot and <strong>without any internet access</strong> will help you improve
productive effects.</li>
  <li>Don’t use your <strong>willpower</strong> to make a habit.</li>
  <li>You need rewiring your bad habit, like your brain will feel better when you
move your focus on some painless thing (YouTube, text message). The key to rewiring
is to <strong>have a plan</strong>. Developing a <strong>ritual</strong> can be helpful (like putting on a
study hat).</li>
  <li>You can give yourself some award:
    <ul>
      <li>an evening of mindless television</li>
      <li>web surfing without guilt</li>
    </ul>
  </li>
  <li>The belief can help you back to your good habit when you feel hard. You can go
to find some classmate, friends on the internet or family to help you remember
the values that, in moments of weakness.</li>
  <li>Try to write daily to-do in <strong>evening before</strong>.</li>
  <li>Mixing other tasks up with your learning seems make everything more enjoyable
and prevent from you sitting too long. (like you can fill some table task after you
have done a hard problem)</li>
  <li>You can write down how long the task cost to help you improve your gauging.</li>
  <li>Set a little deadline everyday at same time. Like 5 p.m.</li>
  <li>You should do the hard task in morning, this will let you take easy whole day.
“<strong><em>Eat your frog first.</em></strong>”</li>
  <li>We have outstanding visual memory. It can help us to form long-term memory.</li>
  <li>You can use a very memorable visual image representing one key item you want
to remember. Like “Flying mule ass” == “f = ma”</li>
  <li>Repetition is important. But you don’t need repetition many times in one day
instead of several days.</li>
  <li>Also you can use <strong><em>index card</em></strong> to help building long-term memory. Write a brief
text or only a sign on one side, and then write more information on the other hand.
Testing yourself before sleep. Extend the period if you remember well.</li>
  <li>The <em>hippocampus</em> (海马体) hold your long-term memory.</li>
  <li>Memory Palace Technique is a particularly powerful way to grouping things you
want to remember.</li>
  <li>(Memory Palace)It can hook the things you want to remember to the fix route 
which is you are very familiar.</li>
  <li>You can convert English word to remember grouping things with their abbreviation.</li>
  <li>You can use some related things to remember a number. Like 11.0 is a time of
100 metre race.</li>
</ol>

<h2 id="week-4-more-tips-about-learning">Week 4 More Tips about learning</h2>
<ol>
  <li>Do the exercise to help building your new neurons.</li>
  <li>When you go through a hard period, you will find your knowledge has been
improved greatly.
To build a analogy or metaphor can help you understand concepts easily, even if
it won’t suitable this at this time. You can fix it after you learning deeply.
(e.g.: Think electrical as water flow. Some place/country as a funny things.)</li>
  <li>If you can remember many things, you won’t be a creative person. Vice versa.</li>
  <li><strong>Imposter syndrome</strong> involves frequent feelings of inadequacy. That is, you
know you will fail even if you pass test this time because it is luck. So you
are afraid you are exposed as a fraud.</li>
  <li>You need do more exercises to make your skill better, so your brain can complete
it easily and it also make more other think.</li>
  <li>Make your eyes open. When you learn a subject you can find more video and talk
to other people to learn what they think about this.</li>
  <li>Find a learning team can help you learn effective. Also teammate may find your
blind point.</li>
  <li>But you should quit the team if your team change to a social team like they
often wandering off the topic or be later.</li>
  <li>A <strong>Test</strong> is better for your learning. It will help you focus. Here is a checklist
before you prepare your test:
    <ol>
      <li>[ ] Did you make a serious effort to understand the text?</li>
      <li>[ ] Did you work with classmates on home work problems? Or check your solutions.</li>
      <li>[ ] Did you attempt to outline every homework problem solution? Skip the
 hard work (calculation).</li>
      <li>[ ] Did you participate <strong>actively</strong> in home work group discussions?</li>
      <li>[ ] Did you find the answer in your teach or instructor?</li>
      <li>[ ] Did you get a reasonable night’s <strong>sleep</strong> before the test?</li>
    </ol>
  </li>
  <li>Hard start-jump to easy. You can skim all problems after get the test paper.
Start from the hard problem, but if you stuck in 1 or 2 minutes, jump to the easy
one, Because the diffuse mode will help you solve the hard one.</li>
  <li>Deep (Abdominal) breathe.</li>
</ol>

        
        

        
    </article> <hr />
    
    
  
    <header class="post-header">
      <h1 itemprop="name" class="post-title">
        <a itemprop="url" class="post-link" href="/tech/2016/05/22/LevelDB-Summarize.html">LevelDB实现总结</a>
      </h1>
      <meta itemprop="keywords" content="algorithm,database" />
      <p class="post-meta">
      Posted in
      
      <a href="/categories/#tech">tech</a>&nbsp;
      
      
      and tagged
      
      <a href="/tags/#algorithm" title="algorithm">algorithm </a>, 
      
      <a href="/tags/#database" title="database">database </a>
      
      
      <time itemprop="datePublished" datetime="2016-05-22">
      on May 22, 2016
      </time>
      </p>
    </header>

    <article class="post-content" itemprop="articleBody">
        
<p>学习了下LevelDB的实现原理，发现G厂大神Jeff Dean果然牛B，实现也很巧妙。
参考链接是<a href="http://www.cnblogs.com/haippy/archive/2011/12/04/2276064.html">这里</a></p>

<h2 id="section">概览</h2>
<ol>
  <li>LevelDB是一个KV<strong>持久化</strong>存储引擎，它的特性是写非常快，读相对写较慢</li>
  <li>LevelDB是基于LSM(Log Structured Merge)实现，它会顺序地记录各种写操作</li>
  <li>LevelDB存储分为两部分，一部分在内存，另一部分在磁盘上。内存中方便快速查找，
查找失败后，去磁盘上查找。一段时间后或内存达到一定大小，会将内存中的compact成sst文件存在磁盘</li>
</ol>

<h2 id="section-1">内存存储</h2>
<ol>
  <li>内存存储叫memTable，存储结构为跳表，存储为顺序存储，查找和写入都很快(O(log N))</li>
  <li>删除操作在这里只是打上删除标记，真正的删除在compaction中做</li>
</ol>

<h2 id="section-2">日志</h2>
<ol>
  <li>日志文件记录了每一步的操作，因为文件的append操作很快，所以LevelDB可以支持大量
的写操作</li>
  <li>每次的写都会先在日志上记一笔，记完后去更新memTable</li>
  <li>如果遇到重启等情况，LevelDB就会将已经持久化的文件与日志进行一个merge操作，这就是LSM，
与HBase的恢复操作很相似</li>
</ol>

<h2 id="section-3">磁盘存储</h2>
<ol>
  <li>磁盘存储叫immuteTable，以一种分层的结构存储，层数从0到n（n会随着数据增多而增多），
层数越高表示数据越老旧（可能存在相同的key），除了<strong>层0</strong>，其他层之间的key都是不相交的</li>
  <li>查找的顺序从这里已经可以得出来了memTable-&gt;层0-&gt;层1-&gt;…-&gt;层n，这也是LevelDB名字的由来，
那么数据是如何从<strong>memTable转移到层0</strong>呢</li>
  <li>层数0是将memTable整个dump出来的结果，因此可能之间有相交，这个操作叫<strong>minor compaction</strong></li>
  <li>major compaction是将层i合到i+1中去，合并是将层i中的一块合到整个层i+1中去，
这个过程类似归并排序，将参与的几个块全部取出来排序，再重新组合成新的层i+1，同时
会将重复的key<strong>弃掉</strong></li>
  <li>弃掉是指如果key已经出现在更低的层，则高级的层不需要记录这个key</li>
</ol>

<h2 id="section-4">文件格式</h2>
<ol>
  <li>实际硬盘存储并非只有一种sst文件，分为三种：</li>
  <li>sst文件记录实际的数据，按顺序排列</li>
  <li>manifest文件是sst文件的索引表，记录各个层0文件的key range</li>
  <li>current文件记录当前的manifest文件是哪个</li>
  <li><strong>sst文件</strong>存储的格式像这样：key共享长度，key非共享长度，value长度，key非共享内容，
value内容。共享长度指的是相邻两个key的公共子串（可能不止两个），比如”the Car”和
“The Color”共享长度是5，即”The C”，后面非共享的部分分别为”ar”和”olor”</li>
  <li><strong>manifest文件</strong>的作用主要是指示层0文件的key range，因为层0会有交叠的情况，
因此查询一个key时可能需要在多个层0文件中寻找（这里层0文件也要按新鲜度排序依次查询）</li>
</ol>

<h2 id="cache">Cache</h2>
<ol>
  <li>查询会先在memTable中找，如果没找到，会去读index，确定在哪个block中，再去block中读，
这至少需要2次磁盘读取</li>
  <li>这里的cache分两种：</li>
  <li>TableCache的key为ssTable名称，值包括磁盘文件指针，以及表结构，表结构又包括
  index内容及block信息。当查到某个table时，要判断这个key在不在table中，然后再去查
  block</li>
  <li>BlockCache为可选项，它的key是block_id，value是block内容，这样就避免了一次读取。
  这种适合热点读取，如果随机读取并不适合打开BlockCache</li>
</ol>

<h2 id="version">Version</h2>
<ol>
  <li>当一次compaction结束后，会创建新版本，当前版本会指向新版本，可用的版本放在
VersionSet中，VersionEdit存在manifest中，表示版本更替的信息，用于重建数据</li>
</ol>

        
        

        
    </article> <hr />
    
    
  
    <header class="post-header">
      <h1 itemprop="name" class="post-title">
        <a itemprop="url" class="post-link" href="/tech/2016/05/11/share-precommit-hook.html">Share precommit hook</a>
      </h1>
      <meta itemprop="keywords" content="git" />
      <p class="post-meta">
      Posted in
      
      <a href="/categories/#tech">tech</a>&nbsp;
      
      
      and tagged
      
      <a href="/tags/#git" title="git">git </a>
      
      
      <time itemprop="datePublished" datetime="2016-05-11">
      on May 11, 2016
      </time>
      </p>
    </header>

    <article class="post-content" itemprop="articleBody">
        
<p>Today I want to share a code snippet. It used for reminding me run <code class="highlighter-rouge">rake preview</code> before <code class="highlighter-rouge">git commit</code>.</p>

<p>TL;DR. Because I use <code class="highlighter-rouge">jeklly</code> to generate my blog static pages, <code class="highlighter-rouge">jeklly</code> is a generator of static blog.
I can write a markdown file (just like this one) and run <code class="highlighter-rouge">rake preview</code>, <code class="highlighter-rouge">jeklly</code> could help me
generate the html files from markdown. So I must remeber run this command before commit changes.
But I often review my articles and found some mistakes in them, I make a tiny hotfix and commit quickly.
In this case, I forgot to re-generate pages. So I made a hook before <code class="highlighter-rouge">git commit</code> which runs this command
automatically and detects some changes occur. The hook will failed when I forget run the command.</p>

<p>Here it is:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>./_gen_wiki.sh  # My blog contains a wiki, so it need be generated.
jekyll build
git diff --quiet --exit-code _site/  # Detect uncached changes.
ret=$?
exec 1&gt;&amp;2
RED='\033[0;31m'
NC='\033[0m' # No Color
[[ x$ret != "x0" ]] &amp;&amp; echo "${RED}Some files still not be stage in directory _site${NC}"
exit $ret
</code></pre>
</div>


        
        

        
    </article> <hr />
    
    
  
  </div>
</div>

    <section class="pager">
  
  
  <li class="next"><a href="/page2/" title="Older">Older &rarr;</a></li>
  
</section>


  </div>
  <div class="col-sm-2">
<div class="sidebar-module about">
  <h4>About Me</h4>
  <img title="More Freeze" src="http://www.gravatar.com/avatar/23062310363b8606a0fe803539367d58?s=200" alt="More Freeze"/>
  <span>Hi, this is More Freeze. I am a backend engineer in Beijing. I am good at C++, PHP, Python deveploping.</span>
  <br />

  

  You can contact me via:

  
  <a href="mailto:morefreeze@gmail.com" title="mailto: morefreeze@gmail.com">Email</a> /
  
  
  <a href="https://github.com/morefreeze" title="GithubID: morefreeze">Github</a> /
  
  
  <a href="https://twitter.com/morefreeze" title="TwitterID: morefreeze">Twitter</a>
  

  

</div>

<div class="sidebar-module"> <!-- sidebar-module-inset">-->
  <h4>Copyright Notice</h4>

  

  <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/">
    <img src="http://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png">
  </a>
  <br />
  <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Attribution-NonCommercial-ShareAlike</a>

  

</div>


<div class="sidebar-module">
  <h4>Recent Posts</h4>
  
  <li>
  <a href="/book/2016/07/16/the-song-of-distant-earth.html" title="The Song Of Distant Earth" rel="bookmark">The Song Of Distant Earth</a>
  </li>
  
  <li>
  <a href="/book/2016/06/24/the-end-of-eternity.html" title="The End of Eternity" rel="bookmark">The End of Eternity</a>
  </li>
  
  <li>
  <a href="/note/2016/06/12/learning-how-to-learn.html" title=""Learning how to learn" Notes" rel="bookmark">"Learning how to learn" Notes</a>
  </li>
  
  <li>
  <a href="/tech/2016/05/22/LevelDB-Summarize.html" title="LevelDB实现总结" rel="bookmark">LevelDB实现总结</a>
  </li>
  
  <li>
  <a href="/tech/2016/05/11/share-precommit-hook.html" title="Share precommit hook" rel="bookmark">Share precommit hook</a>
  </li>
  
</div>


<div class="sidebar-module">
  <h4>Categories</h4>
  
  <li><a href="/categories/#game" title="game" rel="1">game (1)</a></li>
  
  <li><a href="/categories/#articles" title="articles" rel="3">articles (3)</a></li>
  
  <li><a href="/categories/#howto" title="howto" rel="1">howto (1)</a></li>
  
  <li><a href="/categories/#work" title="work" rel="1">work (1)</a></li>
  
  <li><a href="/categories/#algorithm" title="algorithm" rel="1">algorithm (1)</a></li>
  
  <li><a href="/categories/#tech" title="tech" rel="5">tech (5)</a></li>
  
  <li><a href="/categories/#note" title="note" rel="1">note (1)</a></li>
  
  <li><a href="/categories/#book" title="book" rel="2">book (2)</a></li>
  
</div>


<div class="sidebar-module">
  <h4>Tags</h4>
  
    <a href="/tags/#game" title="game" rel="1">game</a> &nbsp;
  
    <a href="/tags/#puzzle" title="puzzle" rel="1">puzzle</a> &nbsp;
  
    <a href="/tags/#fps" title="fps" rel="1">fps</a> &nbsp;
  
    <a href="/tags/#sample-post" title="sample-post" rel="2">sample-post</a> &nbsp;
  
    <a href="/tags/#configure" title="configure" rel="1">configure</a> &nbsp;
  
    <a href="/tags/#crash" title="crash" rel="1">crash</a> &nbsp;
  
    <a href="/tags/#trap" title="trap" rel="1">trap</a> &nbsp;
  
    <a href="/tags/#leetcode" title="leetcode" rel="1">leetcode</a> &nbsp;
  
    <a href="/tags/#solution" title="solution" rel="1">solution</a> &nbsp;
  
    <a href="/tags/#dp" title="dp" rel="1">dp</a> &nbsp;
  
    <a href="/tags/#dfs" title="dfs" rel="1">dfs</a> &nbsp;
  
    <a href="/tags/#tree" title="tree" rel="1">tree</a> &nbsp;
  
    <a href="/tags/#Hadoop" title="Hadoop" rel="3">Hadoop</a> &nbsp;
  
    <a href="/tags/#HBase" title="HBase" rel="3">HBase</a> &nbsp;
  
    <a href="/tags/#git" title="git" rel="1">git</a> &nbsp;
  
    <a href="/tags/#algorithm" title="algorithm" rel="1">algorithm</a> &nbsp;
  
    <a href="/tags/#database" title="database" rel="1">database</a> &nbsp;
  
    <a href="/tags/#note" title="note" rel="1">note</a> &nbsp;
  
    <a href="/tags/#learning" title="learning" rel="1">learning</a> &nbsp;
  
    <a href="/tags/#Note" title="Note" rel="2">Note</a> &nbsp;
  
    <a href="/tags/#Isaac Asimov" title="Isaac Asimov" rel="1">Isaac Asimov</a> &nbsp;
  
    <a href="/tags/#Sci-fi" title="Sci-fi" rel="2">Sci-fi</a> &nbsp;
  
    <a href="/tags/#Arthur C. Clarke" title="Arthur C. Clarke" rel="1">Arthur C. Clarke</a> &nbsp;
  
</div>


<div class="sidebar-module">
  <h4>Blogroll</h4>
  
  <li><a href="http://morefreeze.github.io" title="MoreFreeze's Sanctuary">MoreFreeze</a></li>
  
</div>


<div class="sidebar-module">
  <h4>Archives</h4>

  
  
  
  
  
  <li id="2016" > <a href="/archives/#2016">2016</a></li>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <li id="2015" > <a href="/archives/#2015">2015</a></li>
  
  
  
  
  
  
  
  
  
  
  
  
  <li id="2014" > <a href="/archives/#2014">2014</a></li>
  
  
  
  
  
  
  
  
  
  
  
  
  <li id="2012" > <a href="/archives/#2012">2012</a></li>
  
  

</div>


</div>



  

  <footer class="site-footer">

  <p>Copyright &copy; <a href="/">MoreFreeze</a></p>
  <p>Powered by <a href="https://github.com/jekyll/jekyll">Jekyll</a> 
  on 
  
  <a href="https://github.com/">Github</a>
  
  | Theme <a href="https://github.com/yulijia/freshman21/">Freshman21</a> Design by <a href="http://yulijia.net">Lijia Yu</a>  

</footer>


</div>

</body>

</html>
